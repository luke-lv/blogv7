/* newstopic |  | vserion 0.0.1*/
(function(e,t){function n(e,t){return t=t||M,t?t.getElementsByTagName(e):t}function i(){}function r(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function o(e){return"[object String]"===B.call(e)}function a(e){return"[object Function]"===B.call(e)}function s(e){var t={};return W(e,function(e){t[e]=1}),X(t)}function l(e,t){return e.getAttribute(t)}function u(e){var t=[];return e.replace(z,"").replace(I,function(e,n){t.push(n)}),s(t)}function c(e,n){var i=e(n.require,n.exports,n);i!==t&&(n.exports=i)}function d(){this.map={}}function f(e){for(var t=e.slice(e.lastIndexOf("?")+1).split("&"),n=0;t.length>n;n++){var i=t[n].split("="),r=i[0],o=i[1];if("timestamp"==r)return o}return null}function p(e){return e.indexOf("://")>0||0===e.indexOf("//")}function h(e){return!m(e)}function g(e){var t=e.match(/[^?]*(?=\/.*$)/);return(t?t[0]:".")+"/"}function m(e){return e.slice(e.lastIndexOf("/")+1).replace(/\?.*$/,"")}function v(e){var t=/([^:\/])\/\/+/g;if(t.lastIndex=0,t.test(e)&&(e=e.replace(t,"$1/")),-1===e.indexOf("."))return e;for(var n,i=e.split("/"),r=[],o=0;i.length>o;o++)if(n=i[o],".."===n){if(0===r.length)throw Error("The path is invalid: "+e);r.pop()}else"."!==n&&r.push(n);return r.join("/")}function y(e,t){e=v(e);var n=e.charAt(e.length-1);return"/"===n?e:("#"===n?e=e.slice(0,-1):-1!==e.indexOf("?")||/\.(?:js|css)$/.test(e)||(e+=".js"),e.indexOf(":80/")>0&&(e=e.replace(":80/","/")),t&&(e=e.replace(/\?.+$/,"")),e)}function b(e){var t,n,i,r,o,a={},s=st.directorys;for(t=0;s.length>t&&!a[e];t++){r=s[t];for(o in r)if(n=r[o],i=RegExp("^"+o+"/"),i.test(e)&&!a[e]){e=e.replace(i,n),a[e]=!0;break}}return e}function x(e){var t=st.alias;if(t){var n=t[e];return n?n:b(e)}return e}function w(e,t){if(t=g(t||ct.basepath),p(e))return e;st.init&&(e=x(e));var n="";return 0===e.indexOf("./")||0===e.indexOf("../")?(0===e.indexOf("./")&&(e=e.substring(2)),n=t+e):n="/"===e.charAt(0)&&"/"!==e.charAt(1)?e:t+"/"+e,y(n)}function T(e,t){U.trigger("fetch",[e,t])}function C(e,n,i){var r=k("script",i);r.onload=r.onerror=r.onreadystatechange=function(){/loaded|complete|undefined/.test(r.readyState)&&(r.onload=r.onerror=r.onreadystatechange=null,r.parentNode&&!Z&&r.parentNode.removeChild(r),r=t,a(n)&&n())},r.async="async";var o=tt?tt:et;e=o?e+"?timestamp="+o:e,r.src=e,N(r)}function k(e,t){var n=M.createElement(e);return t&&(n.charset=t),n}function N(e){var t=n("base",V)[0];t?V.insertBefore(e,t):V.appendChild(e)}function E(e){var t=e.id,n=R(e.dependencies,function(e){ut.push(t);var n=S(ct.cache[w(e)]);return n&&ut.push(t),ut.pop(),!n});return A(n)}function S(e){if(!e||e.status!==lt.save)return!1;ut.push(e.id);var t=e.dependencies;if(t.length){if(j(t,ut))return!0;for(var n=0;t.length>n;n++)if(S(ct.cache[w(t[n])]))return!0}return ut.pop(),!1}function j(e,t){var n=e.concat(t);return n.length>s(n).length}function A(e){return o(e)&&(e=[e]),$(e,function(e){return w(e)})}function _(e,t){function n(e){(e||{}).status<lt.ready&&(e.status=lt.ready),--o,0===o&&t()}e=A(e),U.trigger("start",[e]);var i=R(e,function(e){return e&&(!ct.cache[e]||ct.cache[e].status<lt.ready)}),r=i.length;if(0===r)return t(),void 0;var o=r;W(i,function(e){function t(e){if(U.trigger("fetchsuccess",[i,e]),i.status>=lt.save){var t=E(i);t.length?_(t,function(){n(i)}):n(i)}else e?n(i):n()}var i=ct.get(e);i.status<lt.save?T(e,t):t()})}function D(){W(at,function(e){var t=ct.get(e.id);t._save(e)}),at=[]}function L(e,t){_(e,function(){e=A(e);var n=$(e,function(e){return e?ct.get(e)._compile():null});a(t)&&t.apply(null,n),U.trigger("end")})}function q(e){st=e,st.directorys=[];var t,n,i,r=st.alias;if(r)for(t in r)n=r[t],h(n)&&(i={},i[t]=n,st.directorys.push(i));st.init=!0,st.basepath&&(ct.basepath=st.basepath),ct.config=st,tt=st.timestamp}function H(e){this.id=e,this.status=0,this.dependencies=[],this.exports=null,this.parent=[],this.factory=i}var P=!(typeof window===t||!e.navigator||!e.document);if(P){var M=e.document,O=Array.prototype,F=Object,B=F.prototype.toString,z=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,I=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,W=O.forEach?function(e,t){e.forEach(t)}:function(e,t){for(var n=0;e.length>n;n++)t(e[n],n,e)},R=O.filter?function(e,t){return e.filter(t)}:function(e,t){var n=[];return W(e,function(e,i,r){t(e,i,r)&&n.push(e)}),n},$=O.map?function(e,t){return e.map(t)}:function(e,t){var n=[];return W(e,function(e,i,r){n.push(t(e,i,r))}),n},X=F.keys?F.keys:function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t};O.indexOf?function(e,t){return e.indexOf(t)}:function(e,t){for(var n=0;e.length>n;n++)if(e[n]===t)return n;return-1},r(d.prototype,{trigger:function(e,t){var n=this.map[e];n&&W(n,function(e){e.apply(this,t)})},on:function(e,t){this.map[e]?this.map[e].push(t):this.map[e]=[t]}});var U=new d,V=M.head||n("head")[0]||M.documentElement,J=n("script"),Y=J[J.length-1],G=l(Y,"charset")||"GBK",Q=l(Y,"data-path")||Y.src||l(Y,"src"),K=l(Y,"data-config"),Z="true"===l(Y,"data-debug"),et=f(Y.src),tt=null,nt=l(Y,"data-main"),it={},rt={},ot={};U.on("fetch",function(e,t){if(!/\.css$/.test(e)){if(ot[e])return t(),void 0;if(it[e])return rt[e].push(t),void 0;it[e]=!0,rt[e]=[t],C(e,function(){ot[e]=!0,delete it[e];var t=rt[e];t&&(delete rt[e],W(t,function(e){e()}))},G)}});var at=[],st={},lt={created:0,save:1,ready:2,compiling:3,compiled:4},ut=[];r(H.prototype,{_compile:function(){function require(t){t=y(w(t),!0);var n=ct.cache[t];return n?n.status===lt.compiling?n.exports:(n.parent=e,n._compile()):null}var e=this;if(e.status===lt.compiled)return e.exports;if(e.status<lt.save)return null;e.status=lt.compiling,require.cache=ct.cache,e.require=require,e.exports={};var t=e.factory;return a(t)&&c(t,e),e.status=lt.compiled,ct.events.trigger("compiled",[e]),e.exports},_save:function(e){this.status<lt.save&&(this.id=e.id,this.name=e.name,this.dependencies=e.deps,this.factory=e.factory,this.status=lt.save)}});var ct=r({basepath:Q,events:U,cache:{},get:function(e){return e=y(e,!0),ct.cache[e]||(ct.cache[e]=new H(e))},define:function(e,t){var n=u(""+t),i={id:w(e),name:e,deps:n,factory:t};at.push(i),D()},use:function(e,t){!K||st.init?L(e,t):function(){L(K,function(n){q(n),L(e,t)})}()}});K&&(K=A(K)),e.lithe=ct,e.define=ct.define,nt&&setTimeout(function(){e.lithe.use(nt)})}else exports.tool=require("./lib/lithe-tool.js"),exports.hfs=require("./lib/lithe-hfs.js")})(this),function(e,t){var n,i,r=!(typeof window===t||!e.navigator||!e.document);r&&(n=/debug/.test(location.search),i="http://sjs.sinajs.cn");var o={basepath:n?i+"/static/dev/js/":i+"/static/online/js/",alias:{lib:"lib/core/chaos/jquery"}};e.define&&r?define("config",function(){return o}):module.exports=o}(this);