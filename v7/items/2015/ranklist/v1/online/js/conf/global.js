define("vendor/mustache/mustache",function(require,t){function e(t,e){return RegExp.prototype.test.call(t,e)}function n(t){return!e(g,t)}function r(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function i(t){return String(t).replace(/[&<>"'\/]/g,function(t){return d[t]})}function a(t){this.string=t,this.tail=t,this.pos=0}function o(t,e){this.view=t,this.parent=e,this._cache={}}function s(){this.clearCache()}function c(e,n,r,i){for(var a,o,s,l="",u=0,p=e.length;p>u;++u)switch(a=e[u],o=a[1],a[0]){case"#":if(s=r.lookup(o),"object"==typeof s)if(y(s))for(var h=0,f=s.length;f>h;++h)l+=c(a[4],n,r.push(s[h]),i);else s&&(l+=c(a[4],n,r.push(s),i));else if("function"==typeof s){var g=null==i?null:i.slice(a[3],a[5]);s=s.call(r.view,g,function(t){return n.render(t,r)}),null!=s&&(l+=s)}else s&&(l+=c(a[4],n,r,i));break;case"^":s=r.lookup(o),(!s||y(s)&&0===s.length)&&(l+=c(a[4],n,r,i));break;case">":s=n.getPartial(o),"function"==typeof s&&(l+=s(r));break;case"&":s=r.lookup(o),null!=s&&(l+=s);break;case"name":s=r.lookup(o),null!=s&&(l+=t.escape(s));break;case"text":l+=o}return l}function l(t){for(var e,n=[],r=n,i=[],a=0,o=t.length;o>a;++a)switch(e=t[a],e[0]){case"#":case"^":i.push(e),r.push(e),r=e[4]=[];break;case"/":var s=i.pop();s[5]=e[2],r=i.length>0?i[i.length-1][4]:n;break;default:r.push(e)}return n}function u(t){for(var e,n,r=[],i=0,a=t.length;a>i;++i)e=t[i],e&&("text"===e[0]&&n&&"text"===n[0]?(n[1]+=e[1],n[3]=e[3]):(n=e,r.push(e)));return r}function p(t){return[new RegExp(r(t[0])+"\\s*"),new RegExp("\\s*"+r(t[1]))]}t.name="mustache.js",t.version="0.7.2",t.tags=["{{","}}"],t.Scanner=a,t.Context=o,t.Writer=s;var h=/\s*/,f=/\s+/,g=/\S/,v=/\s*=/,w=/\s*\}/,m=/#|\^|\/|>|\{|&|=|!/,y=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},d={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};t.escape=i,a.prototype.eos=function(){return""===this.tail},a.prototype.scan=function(t){var e=this.tail.match(t);return e&&0===e.index?(this.tail=this.tail.substring(e[0].length),this.pos+=e[0].length,e[0]):""},a.prototype.scanUntil=function(t){var e,n=this.tail.search(t);switch(n){case-1:e=this.tail,this.pos+=this.tail.length,this.tail="";break;case 0:e="";break;default:e=this.tail.substring(0,n),this.tail=this.tail.substring(n),this.pos+=n}return e},o.make=function(t){return t instanceof o?t:new o(t)},o.prototype.push=function(t){return new o(t,this)},o.prototype.lookup=function(t){var e=this._cache[t];if(!e){if("."==t)e=this.view;else for(var n=this;n;){if(t.indexOf(".")>0){e=n.view;for(var r=t.split("."),i=0;e&&i<r.length;)e=e[r[i++]]}else e=n.view[t];if(null!=e)break;n=n.parent}this._cache[t]=e}return"function"==typeof e&&(e=e.call(this.view)),e},s.prototype.clearCache=function(){this._cache={},this._partialCache={}},s.prototype.compile=function(e,n){var r=this._cache[e];if(!r){var i=t.parse(e,n);r=this._cache[e]=this.compileTokens(i,e)}return r},s.prototype.compilePartial=function(t,e,n){var r=this.compile(e,n);return this._partialCache[t]=r,r},s.prototype.getPartial=function(t){return t in this._partialCache||!this._loadPartial||this.compilePartial(t,this._loadPartial(t)),this._partialCache[t]},s.prototype.compileTokens=function(t,e){var n=this;return function(r,i){if(i)if("function"==typeof i)n._loadPartial=i;else for(var a in i)n.compilePartial(a,i[a]);return c(t,n,o.make(r),e)}},s.prototype.render=function(t,e,n){return this.compile(t)(e,n)},t.parse=function(e,i){function o(){if(E&&!P)for(;U.length;)delete x[U.pop()];else U=[];E=!1,P=!1}if(e=e||"",i=i||t.tags,"string"==typeof i&&(i=i.split(f)),2!==i.length)throw new Error("Invalid tags: "+i.join(", "));for(var s,c,g,y,d,k=p(i),b=new a(e),_=[],x=[],U=[],E=!1,P=!1;!b.eos();){if(s=b.pos,g=b.scanUntil(k[0]))for(var C=0,j=g.length;j>C;++C)y=g.charAt(C),n(y)?U.push(x.length):P=!0,x.push(["text",y,s,s+1]),s+=1,"\n"==y&&o();if(!b.scan(k[0]))break;if(E=!0,c=b.scan(m)||"name",b.scan(h),"="===c?(g=b.scanUntil(v),b.scan(v),b.scanUntil(k[1])):"{"===c?(g=b.scanUntil(new RegExp("\\s*"+r("}"+i[1]))),b.scan(w),b.scanUntil(k[1]),c="&"):g=b.scanUntil(k[1]),!b.scan(k[1]))throw new Error("Unclosed tag at "+b.pos);if(d=[c,g,s,b.pos],x.push(d),"#"===c||"^"===c)_.push(d);else if("/"===c){if(0===_.length)throw new Error('Unopened section "'+g+'" at '+s);var A=_.pop();if(A[1]!==g)throw new Error('Unclosed section "'+A[1]+'" at '+s)}else if("name"===c||"{"===c||"&"===c)P=!0;else if("="===c){if(i=g.split(f),2!==i.length)throw new Error("Invalid tags at "+s+": "+i.join(", "));k=p(i)}}var A=_.pop();if(A)throw new Error('Unclosed section "'+A[1]+'" at '+b.pos);return x=u(x),l(x)};var k=new s;t.clearCache=function(){return k.clearCache()},t.compile=function(t,e){return k.compile(t,e)},t.compilePartial=function(t,e,n){return k.compilePartial(t,e,n)},t.compileTokens=function(t,e){return k.compileTokens(t,e)},t.render=function(t,e,n){return k.render(t,e,n)},t.to_html=function(e,n,r,i){var a=t.render(e,n,r);return"function"!=typeof i?a:(i(a),void 0)}});
define("lib/mvc/base",function(require,t,i){var n=require("lib"),s=require("lib/more/class"),o=require("lib/more/events"),e=Array.prototype,u=s({defaults:{},initialize:function(t){this.setOptions(t),this.build(),this.setEvents("on")},setOptions:function(t){this.conf=this.conf||n.extend(!0,{},this.defaults),n.isPlainObject(t)||(t={}),n.extend(!0,this.conf,t)},build:n.noop,setEvents:n.noop,proxy:function(t){var i=this,s=this.bound?this.bound:this.bound={},o=e.slice.call(arguments);return o.shift(),t=t||"proxy",n.isFunction(s[t])||(s[t]=function(){if(n.isFunction(i[t])){var s=e.slice.call(arguments);return i[t].apply(i,s.concat(o))}}),s[t]},destroy:function(){this.setEvents("off"),this.off(),this.bound=null}});u.methods(o.prototype),i.exports=u});
define("lib/mvc/delegate",function(require,n,t){var r=require("lib");Array.prototype.forEach||(Array.prototype.forEach=function(n){var t=this.length;if("function"!=typeof n)throw new TypeError;for(var r=arguments[1],o=0;t>o;o++)o in this&&n.call(r,this[o],o,this)}),Array.prototype.map||(Array.prototype.map=function(n,t){var r,o,e;if(null==this)throw new TypeError(" this is null or not defined");var i=Object(this),a=i.length>>>0;if("function"!=typeof n)throw new TypeError(n+" is not a function");for(arguments.length>1&&(r=t),o=new Array(a),e=0;a>e;){var f,c;e in i&&(f=i[e],c=n.call(r,f,e,i),o[e]=c),e++}return o}),t.exports=function(n,t,o,e){var i,a;t&&e&&r.isFunction(e.proxy)&&(i=e.proxy(),n="on"===n?"on":"off",a="on"===n?"delegate":"undelegate",o=r.extend({},o),r.each(o,function(o,e){var f,c,p=[];if(o=o.split(/\s+/),"string"===r.type(e))p=e.split(/\s+/).map(function(n){return i(n)});else{if(!r.isFunction(e))return;p=[e]}c=o.pop(),o.length>=1?(f=o.join(" "),r.isFunction(t[a])&&p.forEach(function(n){t[a](f,c,n)})):r.isFunction(t[n])&&p.forEach(function(r){t[n](c,r)})}))}});
define("lib/mvc/model",function(require,t,e){var i=require("lib"),s=require("lib/mvc/base"),n=require("lib/mvc/delegate"),r="__data__";Function.prototype.bind||(Function.prototype.bind=function(t){var e=this,i=arguments;return function(){e.apply(t,Array.prototype.slice.call(i,1))}});var h=function(t,e){if("string"===i.type(t)){var s=this,n=this[r];if(n){var h=n[t],c=this.processors[t];c&&i.isFunction(c.set)&&(e=c.set(e)),e!==h&&(n[t]=e,s.changed=!0,s.trigger("change:"+t,h))}}},c=function(t){var e=this[r][t];i.isPlainObject(e)?e=i.extend(!0,{},e):i.isArray(e)&&(e=i.extend(!0,[],e));var s=this.processors[t];return s&&i.isFunction(s.get)&&(e=s.get(e)),e},o=function(t){delete this[r][t],this.trigger("change:"+t)},a=s.extend({defaults:{},events:{},processors:{},initialize:function(t){this[r]={},this.defaults=i.extend({},this.defaults),this.events=i.extend({},this.events),this.processors=i.extend({},this.processors),this.changed=!1,this.build(),this.delegate("on"),this.setEvents("on"),this.setOptions(t)},setOptions:function(t){this.set(this.defaults),this.supr(t),this.set(t)},delegate:function(t,e,i,s){t=t||"on",e=e||this,i=i||this.events,s=s||this,n(t,e,i,s)},process:function(t,e){e=i.extend({set:function(t){return t},get:function(t){return t}},e),this.processors[t]=e},set:function(t,e){i.isPlainObject(t)?i.each(t,h.bind(this)):"string"===i.type(t)&&h.call(this,t,e),this.changed&&(this.trigger("change"),this.changed=!1)},get:function(t){if("string"===i.type(t)){if(!this[r])return;return c.call(this,t)}if("undefined"==typeof t){var e={};return i.each(this.keys(),function(t,i){e[i]=c.call(this,i)}.bind(this)),e}},keys:function(){return Object.keys(this[r]||{})},remove:function(t){o.call(this,t),this.trigger("change")},clear:function(){Object.keys(this[r]).forEach(o,this),this.trigger("change")},destroy:function(){this.changed=!1,this.delegate("off"),this.supr(),this.clear(),this[r]=null}});e.exports=a});
define("lib/mvc/view",function(require,e,t){var n=require("lib"),s=require("lib/mvc/base"),i=require("lib/mvc/delegate"),o=function(){var e=this.conf,t=e.template,s=this.nodes,i=s.root;return i||(e.node&&(i=n(e.node)),i&&i.length||("array"===n.type(t)&&(t=t.join("")),i=n(t)),s.root=i),i},l=s.extend({defaults:{node:"",template:"",events:{},role:{}},events:{},initialize:function(e){this.nodes={},this.setOptions(e),this.build(),this.delegate("on"),this.setEvents("on")},setOptions:function(e){this.conf=this.conf||n.extend(!0,{},this.defaults),n.isPlainObject(e)||(e={}),n.extend(!0,this.conf,e),this.events=n.extend({},this.events,e.events)},delegate:function(e,t,n,s){e=e||"on",t=t||this.role("root"),n=n||this.events,s=s||this,i(e,t,n,s)},role:function(e,t){var s=this.nodes,i=o.call(this),l=this.conf.role||{};return t?s[e]=t=n(t):(s[e]&&(t=s[e]),"root"===e?t=i:t&&t.length||(t=l[e]?i.find(l[e]):i.find('[role="'+e+'"]'),s[e]=t)),t},resetRoles:function(){var e=this.nodes;n.each(e,function(t){"root"!==t&&(e[t]=null,delete e[t])})},destroy:function(){this.delegate("off"),this.supr(),this.resetRoles(),this.nodes={}}});t.exports=l});
define("mods/common/header",function(require){var a=require("lib"),n=require("mods/model/notification"),i=a("#all-header");a(function(){var a=i.find(".mail"),t=800,o=function(){a.animate({opacity:1},t,c)},c=function(){flashSwitch&&a.animate({opacity:.6},t,o)},e=function(){flashSwitch=!0,c()},l=function(){flashSwitch=!1},f=function(){var i=n.get("unread"),t=i>9?"9+":i;i>0?(a.html(t),a.addClass("has_mail"),e()):(a.html(""),a.removeClass("has_mail"),l())};f(),n.on("change:unread",f)})});
define("lib",function(require,e,n){jQuery.noConflict(),n.exports=jQuery});
define("lib/more/class",function(){function t(t){return e.call(n(t)?t:function(){},t,1)}function n(t){return typeof t===s}function i(t,n,i){return function(){var r=this.supr;this.supr=i[o][t];var e={}.fabricatedUndefined,s=e;try{s=n.apply(this,arguments)}finally{this.supr=r}return s}}function r(t,r,e){for(var s in r)r.hasOwnProperty(s)&&(t[s]=n(r[s])&&n(e[o][s])&&u.test(r[s])?i(s,r[s],e):r[s])}function e(t,i){function e(){if(this.initialize)this.initialize.apply(this,arguments);else{{i||c&&u.apply(this,arguments)}f.apply(this,arguments)}}var s=function(){};s[o]=this[o];var u=this,a=new s,c=n(t),f=c?t:this,p=c?{}:t;return e.methods=function(t){return r(a,t,u),e[o]=a,this},e.methods.call(e,p).prototype.constructor=e,e.extend=arguments.callee,e[o].implement=e.statics=function(t,n){return t="string"==typeof t?function(){var i={};return i[t]=n,i}():t,r(this,t,u),this},e}var s="function",u=/xyz/.test(function(){return xyz})?/\bsupr\b/:/.*/,o="prototype";return t});
define("lib/more/events",function(require,t,e){var r=/\s+/,i=Object.keys;i||(i=function(t){var e=[];for(var r in t)t.hasOwnProperty(r)&&e.push(r);return e});var n=function(){};n.prototype.on=function(t,e,i){var n,s,o;if(!e)return this;for(n=this.__events||(this.__events={}),t=t.split(r);s=t.shift();)o=n[s]||(n[s]=[]),o.push(e,i);return this},n.prototype.off=function(t,e,n){var s,o,f,h;if(!(s=this.__events))return this;if(!(t||e||n))return delete this.__events,this;for(t=t?t.split(r):i(s);o=t.shift();)if(f=s[o])if(e||n)for(h=f.length-2;h>=0;h-=2)e&&f[h]!==e||n&&f[h+1]!==n||f.splice(h,2);else delete s[o];return this},n.prototype.trigger=function(t){var e,i,n,s,o,f,h,p=[];if(!(e=this.__events))return this;for(t=t.split(r),o=1,f=arguments.length;f>o;o++)p[o-1]=arguments[o];for(;i=t.shift();){if((n=e.all)&&(n=n.slice()),(s=e[i])&&(s=s.slice()),s)for(o=0,f=s.length;f>o;o+=2)s[o].apply(s[o+1]||this,p);if(n)for(h=[i].concat(p),o=0,f=n.length;f>o;o+=2)n[o].apply(n[o+1]||this,h)}return this},n.mixTo=function(t){t=t.prototype||t;var e=n.prototype;for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},e.exports=n});
define("conf/global",function(require){require("vendor/mustache/mustache"),require("lib/mvc/base"),require("lib/mvc/delegate"),require("lib/mvc/model"),require("lib/mvc/view"),require("mods/common/header")});
